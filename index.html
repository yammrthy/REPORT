<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REPORT Form</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
<script>
 // Import the functions you need from the SDKs you need
 import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyC4t1Xid2BM68_qbKwJN2H_jM3AcC6laxc",
    authDomain: "report-dc8f7.firebaseapp.com",
    projectId: "report-dc8f7",
    storageBucket: "report-dc8f7.appspot.com",
    messagingSenderId: "715581314412",
    appId: "1:715581314412:web:2962618785a44793ddcf49",
    measurementId: "G-P4SR2JVNHV"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

window.onload = function() {
    db.collection("reports").get().then((querySnapshot) => {
        querySnapshot.forEach((doc) => {
            const data = doc.data();
            // Add data to your table or chart
            addToTable(data); // Call a function to update the table
        });
    });
};

function addToTable(data) {
    const tableBody = document.getElementById("dataTableBody");
    const row = document.createElement("tr");

    // Add cells to the row based on the data
    const values = [
        data.week,
        data.date,
        data.zone,
        data.location,
        data.issue,
        data.startTime,
        data.endTime,
        data.duration,
        data.message
    ];

    values.forEach(value => {
        const cell = document.createElement("td");
        cell.textContent = value;
        row.appendChild(cell);
    });

    tableBody.appendChild(row);
}

</script>
    <script>
        function updateLocationDropdown() {
            const zone = document.getElementById("zone").value;
            const locationDropdown = document.getElementById("location");
            locationDropdown.innerHTML = ""; // Clear previous options
            
            let locations;
            switch (zone) {
                case "Z1":
                    locations = ["SMS1"];
                    break;
                case "Z2":
                    locations = ["HSM-1", "COREX-1", "COREX-2", "BF-1", "BF-2", "BF-3", "BF-4", "PP-1", "SP-1", "SP-2", "SP-3", "SP-4"];
                    break;
                case "Z3":
                locations = ["CRM-1","CRM-2","WRM-1","BRM-1","ISHOP","CRS"];
                    break;
                case "Z4":
                locations = ["SMS-2"];
                    break;
                case "Z5":
                locations=["HSM-2"];
                    break;
                case "Z6":
                    locations = ["SMS-3","PP-2","PP-3","WRM-2","BRM-2"]; 
                    break;
                default:
                    locations = [];
            }

            locations.forEach(location => {
                const option = document.createElement("option");
                option.value = location;
                option.text = location;
                locationDropdown.add(option);
            });
        }

        function handleSubmit(event) {
            event.preventDefault(); // Prevent the default form submission

            const week = document.getElementById("week").value;
            const date = document.getElementById("date").value;
            const zone = document.getElementById("zone").value;
            const location = document.getElementById("location").value;
            const issue = document.getElementById("issue").value;
            const startTime = document.getElementById("startTime").value;
            const endTime = document.getElementById("endTime").value;
            const message = document.getElementById("message").value;

            const formData = {
                week,
                date,
                zone,
                location,
                issue,
                startTime,
                endTime,
                message,
            };

            // Retrieve existing reports and add the new one
            const reports = JSON.parse(localStorage.getItem("reports")) || [];
            reports.push(formData);
            localStorage.setItem("reports", JSON.stringify(reports));

            // Refresh the page after submission
            window.location.reload();
        }

        function handleNext() {
            window.location.href = 'table.html'; // Redirect to the table page
        }
    </script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background-color: #f4f4f4;
            padding: 0;
            box-sizing: border-box;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: rgb(255, 255, 255);
            border-bottom: 2px solid #ccc;
            margin-bottom: 20px;
        }

        header img {
            width: 120px;
            height: 60px;
        }

        header h1 {
            flex: 1;
            text-align: center;
            margin: 0;
            font-size: 1.5em;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
            padding: 20px;
            border-radius: 4px;
        }

        label {
            font-weight: bold;
            display: block;
    margin-bottom: 8px;
    font-weight: bold;
        }
        
input[type="number"],
input[type="date"],
input[type="time"],
select,
textarea {
    width: calc(100% - 20px);
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 4px;
}


        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }

        textarea {
            width: unset;
            height: 100px; /* Adjusted height for consistency */
        }

        .button-container {
            display: flex;
            justify-content: center; /* Center the buttons */
            gap: 10px; /* Space between buttons */
            flex-wrap: wrap; /* Allow buttons to wrap on small screens */
        }

        button {
            flex: 1; /* Make buttons equal width */
            padding: 10px;
            background-color: rgb(24, 71, 159);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1em;
            max-width: 200px; /* Set a max width for buttons */
        }

        button:hover {
            background-color: #0056b3;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.5em;
            }

            button {
                font-size: 0.9em;
                flex: 1 1 100%; /* Full width on smaller screens */
            }
        }
    </style>
</head>
<body>
    <header>
        <img src="logo.png" alt="JSW">
        <h1>REPORT FORM</h1>
    </header>
    
    <form id="reportForm" onsubmit="handleSubmit(event)">
        <div style="display: flex; justify-content: space-between;">
            <div style="flex: 1; margin-right: 10px;">
                <label for="week">Enter Week:</label>
                <input type="number" id="week" required>
            </div>
            <div style="flex: 1;">
                <label for="date">Date:</label>
                <input type="date" id="date" required>
            </div>
        </div>

        <div style="display: flex; justify-content: space-between;">
            <div style="flex: 1; margin-right: 10px;">
                <label for="zone">Zone:</label>
                <select id="zone" onchange="updateLocationDropdown()" required>
                    <option value="">Select Zone</option>
                    <option value="Z1">Z1</option>
                    <option value="Z2">Z2</option>
                    <option value="Z3">Z3</option>
                    <option value="Z4">Z4</option>
                    <option value="Z5">Z5</option>
                    <option value="Z6">Z6</option>
                </select>
            </div>
            <div style="flex: 1;">
                <label for="location">Location:</label>
                <select id="location" required>
                    <option value="">Select Location</option>
                </select>
            </div>
        </div>

        <div style="display: flex; justify-content: space-between;">
            <div style="flex: 1; margin-right: 10px;">
                <label for="startTime">Starting Time:</label>
                <input type="time" id="startTime" required>
            </div>
            <div style="flex: 1;">
                <label for="endTime">Ending Time:</label>
                <input type="time" id="endTime" required>
            </div>
        </div>

        <label for="issue">Issue:</label>
        <select id="issue" required>
            <option value="">Select Issue</option>
            <option value="BD">BD</option>
            <option value="SC">SC</option>
            <option value="INSP">INSP</option>
            <option value="PM">PM</option>
            <option value="OTHERS">OTHERS</option>
        </select>

        <label for="message">Enter Message:</label>
        <textarea id="message" required></textarea>

        <div class="button-container">
            <button type="submit">Submit</button>
            <button type="button" onclick="handleNext()">Next</button>
        </div>
    </form>
</body>
</html>
